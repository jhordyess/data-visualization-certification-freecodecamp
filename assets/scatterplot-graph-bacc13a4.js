import"./style-3f9d7e1e.js";import*as a from"https://cdn.jsdelivr.net/npm/d3@7/+esm";const g="https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json",i=896,c=512,n={top:20,right:20,bottom:30,left:40},y=async(e=g)=>await fetch(e).then(t=>t.json());async function w(e){try{const[{cca2:t}]=await fetch(`https://restcountries.com/v3.1/alpha/${e}`).then(r=>r.json()),o=t.split("").map(r=>127397+r.charCodeAt());return String.fromCodePoint(...o)}catch{return e}}const s=a.select("#chart-container").append("svg").attr("width",i).attr("height",c),l=a.scaleUtc().range([n.left,i-n.right]),d=a.scaleUtc().range([c-n.bottom,n.top]),f=e=>{s.selectAll("circle").data(e).enter().append("circle").attr("data-xvalue",({Year:t})=>new Date(t,0).toISOString()).attr("data-yvalue",({Seconds:t})=>new Date(0,0,0,0,0,t).toISOString()).attr("cx",({Year:t})=>l(new Date(t,0))).attr("cy",({Seconds:t})=>d(new Date(0,0,0,0,0,t))).attr("r",6).attr("class",({Doping:t})=>(t?"stroke-2 stroke-red-400 fill-white hover:fill-red-400 cursor-pointer ":"stroke-2 stroke-blue-500 fill-white hover:fill-blue-500 cursor-pointer ")+"dot ").on("mouseover",async(t,{Name:o,Nationality:r,Year:p,Time:m,Doping:h})=>{const x=await w(r);a.select("#tooltip").style("display","block").attr("data-year",new Date(p,0).toISOString()).html(`${o} ${x}<br/><b>Year:</b> ${p}, <b>Time:</b> ${m}${h?`<br/><i>${h}</i>`:""}`).style("left",`${t.pageX+20}px`).style("top",`${t.pageY-20}px`)}).on("mouseout",()=>{a.select("#tooltip").style("display","none")})},u=()=>{const e=s.append("g").attr("id","legend"),t=i-n.right,o=c/2-20,r=6;e.append("circle").attr("cx",t).attr("cy",o).attr("r",r).attr("class","stroke-2 stroke-blue-500 fill-white"),e.append("text").attr("x",t-r*2).attr("y",o+4).text("No doping allegations").attr("text-anchor","end").attr("class","text-xs"),e.append("circle").attr("cx",t).attr("cy",o+24).attr("r",r).attr("class","stroke-2 stroke-red-400 fill-white"),e.append("text").attr("x",t-r*2).attr("y",o+28).text("Riders with doping allegations").attr("text-anchor","end").attr("class","text-xs")},b=()=>{const e=a.axisBottom(l),t=a.axisLeft(d).tickFormat(a.timeFormat("%M:%S")).ticks(10);s.append("g").attr("id","x-axis").attr("transform",`translate(0,${c-n.bottom})`).call(e),s.append("g").attr("id","y-axis").attr("transform",`translate(${n.left},0)`).call(t)},k=async()=>{const e=await y();document.getElementById("spinner").style.display="none",document.getElementById("chart-container").style.display="block",l.domain([a.min(e,({Year:t})=>new Date(t-1,0)),a.max(e,({Year:t})=>new Date(t+1,0))]),d.domain([a.max(e,({Seconds:t})=>new Date(0,0,0,0,0,t)),a.min(e,({Seconds:t})=>new Date(0,0,0,0,0,t))]),f(e),u(),b()};k();
