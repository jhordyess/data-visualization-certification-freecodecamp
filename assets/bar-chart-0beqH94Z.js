import"./style-Ckw8JOKk.js";import*as n from"https://cdn.jsdelivr.net/npm/d3@7/+esm";const w="https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/GDP-data.json",m=896,l=512,a={top:20,right:20,bottom:30,left:40},b=async(e=w)=>{const{data:o,from_date:t,to_date:r}=await fetch(e).then(s=>s.json());return{data:o,fromDate:new Date(t),toDate:new Date(r)}},x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),D=e=>new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(e),y=(e,o)=>{const t=n.select("#tooltip"),r=x(o[1]),s=D(new Date(o[0])),g=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;let i=e.clientX+a.left;const u=e.clientY-a.top-a.bottom,p=128;i+p+a.right>g&&(i=e.clientX-p-a.left),t.style("display","block").style("transform",`translate(${i}px,${u}px)`).attr("data-date",o[0]).html(`${s}<br>${r} Billion`)},f=()=>{n.select("#tooltip").style("display","none")},d=n.select("#chart-container").append("svg").attr("width",m).attr("height",l),h=n.scaleUtc().range([a.left,m-a.right]),c=n.scaleLinear().range([l-a.bottom,a.top]),W=e=>{const o=m/e.length;d.selectAll("rect").data(e).enter().append("rect").attr("class","bar fill-blue-500 hover:fill-gray-200 cursor-pointer").attr("data-date",t=>t[0]).attr("data-gdp",t=>t[1]).attr("x",t=>h(new Date(t[0]))).attr("y",t=>c(t[1])).attr("width",o).attr("height",t=>l-a.bottom-c(t[1])).on("mouseover",y).on("mouseout",f).on("click",(t,r)=>{const s=t.target;s.classList.add("fill-gray-200"),y(t,r),setTimeout(()=>{f(),s.classList.remove("fill-gray-200")},1e3)})},S=()=>{const e=n.axisBottom(h),o=n.axisLeft(c);d.append("g").attr("id","x-axis").attr("transform",`translate(0,${l-a.bottom})`).call(e),d.append("g").attr("id","y-axis").attr("transform",`translate(${a.left},0)`).call(o)},T=async()=>{const{data:e,fromDate:o,toDate:t}=await b();document.getElementById("spinner").style.display="none",document.getElementById("chart-container").style.display="block",h.domain([o,t]),c.domain([0,n.max(e,r=>r[1])]),W(e),S()};T();
